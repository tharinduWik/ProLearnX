{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8080/api';\n\n// Create axios instance with base URL\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 30000 // 30 second timeout for all requests\n});\n\n// Add request interceptor to include auth token if available\napiClient.interceptors.request.use(config => {\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  if (user && user.token) {\n    config.headers.Authorization = `Bearer ${user.token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Add response interceptor for better error handling\napiClient.interceptors.response.use(response => response, error => {\n  console.error('API Error:', error);\n  if (error.response) {\n    // The request was made and the server responded with a status code\n    // that falls out of the range of 2xx\n    console.error('Response data:', error.response.data);\n    console.error('Response status:', error.response.status);\n  } else if (error.request) {\n    // The request was made but no response was received\n    console.error('No response received:', error.request);\n  } else {\n    // Something happened in setting up the request that triggered an Error\n    console.error('Request error:', error.message);\n  }\n  return Promise.reject(error);\n});\nexport const userService = {\n  register: userData => apiClient.post('/users/register', userData),\n  login: (email, password) => apiClient.post(`/users/login?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`),\n  getUser: userId => apiClient.get(`/users/${userId}`),\n  updateUser: (userId, userData) => apiClient.put(`/users/${userId}`, userData)\n};\nexport const postService = {\n  createPost: formData => {\n    console.log(\"Creating post with form data:\", formData);\n    // Set longer timeout for file uploads (60 seconds)\n    return axios.post(`${API_URL}/posts`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      timeout: 60000,\n      onUploadProgress: progressEvent => {\n        // Optional progress tracking\n        const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        console.log(`Upload progress: ${percentCompleted}%`);\n      }\n    });\n  },\n  // New method for creating posts with pre-uploaded media URLs\n  createPostWithUrls: postData => {\n    console.log(\"Creating post with URLs:\", postData);\n    return apiClient.post('/posts/with-urls', postData, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  getAllPosts: () => apiClient.get('/posts'),\n  getUserPosts: userId => apiClient.get(`/posts/user/${userId}`),\n  getPost: postId => apiClient.get(`/posts/${postId}`),\n  deletePost: postId => apiClient.delete(`/posts/${postId}`)\n};\nexport default apiClient;","map":{"version":3,"names":["axios","API_URL","apiClient","create","baseURL","headers","timeout","interceptors","request","use","config","user","JSON","parse","localStorage","getItem","token","Authorization","error","Promise","reject","response","console","data","status","message","userService","register","userData","post","login","email","password","encodeURIComponent","getUser","userId","get","updateUser","put","postService","createPost","formData","log","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","createPostWithUrls","postData","getAllPosts","getUserPosts","getPost","postId","deletePost","delete"],"sources":["D:/Projects/PAF Project/ProLearnXGit/ProLearnX/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8080/api';\r\n\r\n// Create axios instance with base URL\r\nconst apiClient = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  timeout: 30000 // 30 second timeout for all requests\r\n});\r\n\r\n// Add request interceptor to include auth token if available\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    if (user && user.token) {\r\n      config.headers.Authorization = `Bearer ${user.token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Add response interceptor for better error handling\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    console.error('API Error:', error);\r\n    if (error.response) {\r\n      // The request was made and the server responded with a status code\r\n      // that falls out of the range of 2xx\r\n      console.error('Response data:', error.response.data);\r\n      console.error('Response status:', error.response.status);\r\n    } else if (error.request) {\r\n      // The request was made but no response was received\r\n      console.error('No response received:', error.request);\r\n    } else {\r\n      // Something happened in setting up the request that triggered an Error\r\n      console.error('Request error:', error.message);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const userService = {\r\n  register: (userData) => apiClient.post('/users/register', userData),\r\n  login: (email, password) => apiClient.post(`/users/login?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`),\r\n  getUser: (userId) => apiClient.get(`/users/${userId}`),\r\n  updateUser: (userId, userData) => apiClient.put(`/users/${userId}`, userData)\r\n};\r\n\r\nexport const postService = {\r\n  createPost: (formData) => {\r\n    console.log(\"Creating post with form data:\", formData);\r\n    // Set longer timeout for file uploads (60 seconds)\r\n    return axios.post(`${API_URL}/posts`, formData, {\r\n      headers: { \r\n        'Content-Type': 'multipart/form-data'\r\n      },\r\n      timeout: 60000,\r\n      onUploadProgress: (progressEvent) => {\r\n        // Optional progress tracking\r\n        const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        console.log(`Upload progress: ${percentCompleted}%`);\r\n      }\r\n    });\r\n  },\r\n  \r\n  // New method for creating posts with pre-uploaded media URLs\r\n  createPostWithUrls: (postData) => {\r\n    console.log(\"Creating post with URLs:\", postData);\r\n    return apiClient.post('/posts/with-urls', postData, {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  },\r\n  \r\n  getAllPosts: () => apiClient.get('/posts'),\r\n  getUserPosts: (userId) => apiClient.get(`/posts/user/${userId}`),\r\n  getPost: (postId) => apiClient.get(`/posts/${postId}`),\r\n  deletePost: (postId) => apiClient.delete(`/posts/${postId}`)\r\n};\r\n\r\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}